<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-table.css') }}">
<link href="{{ url_for('static', filename='css/bootstrap-table-filter-control.css') }}" rel="stylesheet">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css"> -->

<p class="page-title">LAST MATCH</p>

<!-- <button id="test-btn">checbox test</button> -->
<div class="grid-container" id="table-wrapper">
    <div class="left-panel">
      <table style="padding:0; margin:0; cursor:pointer;" id="last-match-table"
              data-classes="table table-hover"
              data-toolbar="#toolbar"
              data-toggle="table"
              data-height="580"
              data-sort-name="surname"
              data-sort-order="asc"
              data-search="true"
              data-strict-search="true"
		data-show-columns="true"
              data-minimum-count-columns="2"
              data-id-field="id"
              data-pagination-loop="false"
              data-maintain-selected="true"
              data-row-style="rowStyle"
              data-unique-id="student_id"
              data-filter-control="true">
          <thead>
          <tr>
              <th data-field="selected" data-checkbox="true"></th>
              <th hidden data-field="is_mentor" data-visible="false">Mentor</th>
              <th data-field="student_id" data-sortable="true">Student ID</th>
              <th data-field="name" data-sortable="true">First Name</th>
              <th data-field="surname" data-sortable="true">Last Name</th>
              <th data-field="email" data-sortable="false">E-mail</th>
              <th data-field="faculty" data-sortable="true" data-filter-control="select">Faculty</th>
              <th data-field="program" data-sortable="true">Program</th>
          </tr>
          </thead>
      </table>
  </div>

  <div class="right-panel">

      <!-- graph -->
      <div id="engagement-chart-wrapper" style="max-height:137px;position: relative; height: 25%; max-width: 250px;">
         <canvas id="engagement-chart"></canvas>
      </div>

      <!-- current group list -->
      <div class="current-group">
          <div class="group-mentor">
              <table class="group-table">
                  <thead>
                      <tr><td colspan="3"><div class="caption">Faculty</div></td></tr>
                  </thead>
                  <tbody class="faculty-table">
                  </tbody>
                  <thead>
                      <tr><td colspan="3"><div class="caption">Mentor</div></td></tr>
                  </thead>
                  <tbody class="mentors-table">
                  </tbody>
                  <thead id="mentees-header">
                      <tr><td colspan="3"><div class="caption">Mentees <p style="display:inline; font-weight:400;" class="mentees-num"></p></div></td></tr>
                  </thead>
                  <tbody class="mentees-table">
                  </tbody>
              </table>
          </div>
      </div>
  </div>

  <div class="bottom-left-panel">

        <div id="last-match-faculty-bar" class="progress" style="max-height: 5px;">

            <div class="progress-bar business" data-toggle="tooltip" title="Faculty of Business and IT (10%)"
                style="width:0%; margin: 0 1px 0 0;"></div>

            <div class="progress-bar education" data-toggle="tooltip" title="Faculty of Education (17%)"
                style="width:0%; margin: 0 1px 0 1px;"></div>

            <div class="progress-bar engineering" data-toggle="tooltip" title="Faculty of Engineering and Applied Science (23%)"
                style="width:0%; margin: 0 1px 0 1px;"></div>

            <div class="progress-bar energy" data-toggle="tooltip" title="Faculty of Energy Systems and Nuclear Science (20%)"
                style="width:0%; margin: 0 1px 0 1px;"></div>

            <div class="progress-bar health" data-toggle="tooltip" title="Faculty of Health Sciences (5%)"
                style="width:0%; margin: 0 1px 0 1px;"></div>

            <div class="progress-bar science" data-toggle="tooltip" title="Faculty of Science (8%)"
                style="width:0%; margin: 0 1px 0 1px;"></div>

            <div class="progress-bar social" data-toggle="tooltip" title="Faculty of Social Science and Humanities (17%)"
                style="width:0%; margin: 0 0 0 1px;"></div>
        </div>
  </div>

  <div class="bottom-right-panel">

      <button class="mmm-btn mmm-btn-disabled" style="width: 52%; margin: 0; float: left;">
          <a style="display:inline-block;">
              <div>
                  <img src="{{ url_for('static', filename='./img/download-icon.png') }}" style="height:15px">
                  <p>ENGAGEMENT</p>
              </div>
          </a>
      </button>

      <button class="mmm-btn" style="width: 45%; margin: 0; float: right;">
          <a href="/download" style="display:inline-block;">
              <div>
                  <img src="{{ url_for('static', filename='./img/download-icon.png') }}" style="height:15px">
                  <p>MATCHES</p>
              </div>
          </a>
      </button>
  </div>

</div>

<!-- MODALS -->

<!-- E-mail Selected Modal -->
<div class="modal hide fade" id="modal-email-checked" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Email Selected Students</h4>
      </div>
      <div class="modal-body container">        

          <!-- instructions -->
          <div class="row">
            <div class="col">
              <span style="font-size:0.8em; font-weight:400;">
                Send a personalized email to selected students from the table
              </span>
            </div>
          </div> <!-- instructions END -->

          <!-- Checkbox for sending email to the whole group -->
          <div class="row" style="margin-bottom: 2em">
            <div class="col">
              <input id="checkBox" type="checkbox">
              <span style="font-size:0.8em; font-weight:400;">
                Send email to all students in this group
              </span>
            </input>
            </div>
          </div>


          <!-- subject  -->
          <div class="row">
            <div class="col-9">
              <input type="text" name="subject" class="form-control" placeholder="Subject" style="font-size:0.8em; color:black; margin-bottom:0.5em">
            </div>
          </div> <!-- subject END  -->

          <!-- message -->
          <div class="row">
            <div class="col">
              <textarea class="form-control" placeholder="Message" id="mentor-e-mail-textarea" style="font-size:0.8em; height:150px;color:black;"></textarea>
              <!-- EMAIL BUTTON  -->
              <button id="btn-email-selected" class="mmm-btn" style="float:right;outline:0;">
                <a style="display:inline-block;">
                  <div>
                    <img src="/static/img/mail-icon.png" style="height:15px">
                    <p>SEND EMAIL</p>
                  </div>
                </a>
              </button>
            </div>
          </div> <!-- message END -->
      </div> <!-- modal body END -->

        <!-- loader -->
        <div class="row">
          <div class="col">
            <center><div class="loader"></div></center>
          </div>
        </div>              
        
        <!-- success message -->
        <div class="row">
          <div class="col">
            <div class="modal-success-body" style="width:100%; text-align:center; display:none;">
              <img src="static/img/green-checkmark.png" style="height:40px; margin-bottom:10px;">
              <p>E-mail sent.</p>
            </div>
          </div>
        </div>
        
      
      </div><!-- container END -->
    </DIV>

  </DIV>
</DIV>

<!-- Manual Assignation Modal -->
<div class="modal hide fade" id="modal-manual-assignation" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Manual Assignation</h4>
      </div>
      <div class="modal-body">
          <div class="manual-section">
              <table class="manual-table">
                  <thead>
                      <tr>
                          <td><div class="caption">Faculty</div></td>
                          <td><div class="caption">Mentee</div></td>
                          <td><div class="caption">Mentor</div></td>
                      </tr>
                  </thead>
                  <tbody>
                  </tbody>
              </table>
              <div class="vspacing"></div>
              <p>Change the current mentor in the dropdown box and click "Save Match". If you wish to cancel, just press the "Cancel" button and no changes will be made.</p>
              <!-- Checkbox for emailing updates to mentors -->
              <input id="checkBox" type="checkbox" checked>
              <span style="font-size:0.8em; font-weight:400;">
                Send email to mentors to update them on the changes
              </span>
            </input>
          </div>
          <div class="manual-error">
              <p>No students were selected that match the criteria for manual assignation.</p>
          </div>
      </div><!-- modal-body END -->

      <!-- loader -->
        <div class="row">
          <div class="col">
            <center><div class="loader"></div></center>
          </div>
        </div>              
        
        <!-- success message -->
        <div class="row">
          <div class="col">
            <div class="modal-success-body" style="width:100%; text-align:center; display:none;">
              <img src="static/img/green-checkmark.png" style="height:40px; margin-bottom:10px;">
              <p>Saved</p>
            </div>
          </div>
        </div>
      
      <div class="modal-footer">
        <button type="button" class="btn" data-dismiss="modal">Cancel</button>
        <button id="btn-manual-assig-save" type="button" class="btn btn-default">Save Match</button>
      </div>
    </div>
  </div>
</div>

<!-- END MODALS -->

<script src="{{ url_for('static', filename='js/bootstrap-table.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-table-filter-control.js') }}"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script> -->
